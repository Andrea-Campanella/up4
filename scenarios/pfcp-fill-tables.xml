<!--
 ~ SPDX-License-Identifier: LicenseRef-ONF-Member-1.0
 ~ SPDX-FileCopyrightText: 2020-present Open Networking Foundation <info@opennetworking.org>
  -->
<scenario name="pfcp-fill-tables" description="Set up a bunch of UE sessions to fill the UPF">
    <group name="Pfcp-Fill-Tables">
        <group name="FT-Setup-Flows">
            <step name="FT-Create-Sessions"
                  exec="mock-smf-cmd create --session-count 32"/>
            <step name="FT-Modify-Sessions" requires="^" delay="10"
                  exec="mock-smf-cmd modify"/>
        </group>

        <step name="FT-Check-Flows-1" requires="FT-Setup-Flows"
              exec="onos-cli-grep ${OCI} up4:read-flows '64 flows found'"/>
        <step name="FT-Check-Flows-2" requires="^" delay="5"
              exec="onos-check-flows ${OCI}"/>

        <step name="FT-Delete-Sessions" requires="~^"
              exec="mock-smf-cmd delete --session-count 32"/>
        <step name="FT-Check-Flows-3" requires="^" delay="10"
              exec="onos-cli-grep ${OCI} up4:read-flows '0 flows found'"/>
    </group>
</scenario>
